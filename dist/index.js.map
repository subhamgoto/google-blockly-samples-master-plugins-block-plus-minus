{"version":3,"file":"index.js","mappings":"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","sources":["webpack://@blockly/block-plus-minus-updated/webpack/universalModuleDefinition","webpack://@blockly/block-plus-minus-updated/external umd {\"root\":\"Blockly\",\"commonjs\":\"blockly/core\",\"commonjs2\":\"blockly/core\",\"amd\":\"blockly/core\"}","webpack://@blockly/block-plus-minus-updated/webpack/bootstrap","webpack://@blockly/block-plus-minus-updated/webpack/runtime/compat get default export","webpack://@blockly/block-plus-minus-updated/webpack/runtime/define property getters","webpack://@blockly/block-plus-minus-updated/webpack/runtime/hasOwnProperty shorthand","webpack://@blockly/block-plus-minus-updated/webpack/runtime/make namespace object","webpack://@blockly/block-plus-minus-updated/./src/serialization_helper.js","webpack://@blockly/block-plus-minus-updated/./src/field_plus.js","webpack://@blockly/block-plus-minus-updated/./src/field_minus.js","webpack://@blockly/block-plus-minus-updated/./src/make_lookup.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"blockly/core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"blockly/core\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"blockly/core\")) : factory(root[\"Blockly\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, (__WEBPACK_EXTERNAL_MODULE__573__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__573__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * @license\n * Copyright 2022 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as Blockly from 'blockly/core';\n\n/**\n * Returns the extra state of the given block (either as XML or a JSO, depending\n * on the block's definition).\n * @param {!Blockly.BlockSvg} block The block to get the extra state of.\n * @return {string} A stringified version of the extra state of the given block.\n */\nexport function getExtraBlockState(block) {\n  // TODO: This is a dupe of the BlockChange.getExtraBlockState code, do we\n  //    want to make that public?\n  if (block.saveExtraState) {\n    const state = block.saveExtraState();\n    return state ? JSON.stringify(state) : '';\n  } else if (block.mutationToDom) {\n    const state = block.mutationToDom();\n    return state ? Blockly.Xml.domToText(state) : '';\n  }\n  return '';\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A field for a plus button used for mutation.\n */\n'use strict';\n\nimport * as Blockly from 'blockly/core';\nimport {getExtraBlockState} from './serialization_helper';\n\n/**\n * Creates a plus image field used for mutation.\n * @param {Object=} args Untyped args passed to block.minus when the field\n *     is clicked.\n * @return {Blockly.FieldImage} The Plus field.\n */\nexport function createPlusField(args = undefined) {\n  const plus = new Blockly.FieldImage(plusImage, 15, 15, undefined, onClick_);\n  /**\n   * Untyped args passed to block.plus when the field is clicked.\n   * @type {?(Object|undefined)}\n   * @private\n   */\n  plus.args_ = args;\n  return plus;\n}\n\n/**\n * Calls block.plus(args) when the plus field is clicked.\n * @param {!Blockly.FieldImage} plusField The field being clicked.\n * @private\n */\nfunction onClick_(plusField) {\n  // TODO: This is a dupe of the mutator code, anyway to unify?\n  const block = plusField.getSourceBlock();\n\n  if (block.isInFlyout) {\n    return;\n  }\n\n  Blockly.Events.setGroup(true);\n  const oldExtraState = getExtraBlockState(block);\n  block.plus(plusField.args_);\n  const newExtraState = getExtraBlockState(block);\n\n  if (oldExtraState != newExtraState) {\n    Blockly.Events.fire(new Blockly.Events.BlockChange(\n        block, 'mutation', null, oldExtraState, newExtraState));\n  }\n  Blockly.Events.setGroup(false);\n}\n\nconst plusImage =\n    'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC' +\n    '9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMT' +\n    'ggMTBoLTR2LTRjMC0xLjEwNC0uODk2LTItMi0ycy0yIC44OTYtMiAybC4wNzEgNGgtNC4wNz' +\n    'FjLTEuMTA0IDAtMiAuODk2LTIgMnMuODk2IDIgMiAybDQuMDcxLS4wNzEtLjA3MSA0LjA3MW' +\n    'MwIDEuMTA0Ljg5NiAyIDIgMnMyLS44OTYgMi0ydi00LjA3MWw0IC4wNzFjMS4xMDQgMCAyLS' +\n    '44OTYgMi0ycy0uODk2LTItMi0yeiIgZmlsbD0id2hpdGUiIC8+PC9zdmc+Cg==';\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A function that creates a minus button used for mutation.\n */\n'use strict';\n\nimport * as Blockly from 'blockly/core';\nimport {getExtraBlockState} from './serialization_helper';\n\n/**\n * Creates a minus image field used for mutation.\n * @param {Object=} args Untyped args passed to block.minus when the field\n *     is clicked.\n * @return {Blockly.FieldImage} The minus field.\n */\nexport function createMinusField(args = undefined) {\n  const minus = new Blockly.FieldImage(minusImage, 15, 15, undefined, onClick_);\n  /**\n   * Untyped args passed to block.minus when the field is clicked.\n   * @type {?(Object|undefined)}\n   * @private\n   */\n  minus.args_ = args;\n  return minus;\n}\n\n/**\n * Calls block.minus(args) when the minus field is clicked.\n * @param {Blockly.FieldImage} minusField The field being clicked.\n * @private\n */\nfunction onClick_(minusField) {\n  // TODO: This is a dupe of the mutator code, anyway to unify?\n  const block = minusField.getSourceBlock();\n\n  if (block.isInFlyout) {\n    return;\n  }\n\n  Blockly.Events.setGroup(true);\n  const oldExtraState = getExtraBlockState(block);\n  block.minus(minusField.args_);\n  const newExtraState = getExtraBlockState(block);\n\n  if (oldExtraState != newExtraState) {\n    Blockly.Events.fire(new Blockly.Events.BlockChange(\n        block, 'mutation', null, oldExtraState, newExtraState));\n  }\n  Blockly.Events.setGroup(false);\n}\n\nconst minusImage =\n    'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAw' +\n    'MC9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPS' +\n    'JNMTggMTFoLTEyYy0xLjEwNCAwLTIgLjg5Ni0yIDJzLjg5NiAyIDIgMmgxMmMxLjEwNCAw' +\n    'IDItLjg5NiAyLTJzLS44OTYtMi0yLTJ6IiBmaWxsPSJ3aGl0ZSIgLz48L3N2Zz4K';\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Changes the text_join block to use a +/- mutator UI.\n */\n\nimport Blockly from 'blockly/core';\nimport {createPlusField} from './field_plus';\nimport {createMinusField} from './field_minus';\n\nconst textJoinMutator = {\n  /**\n   * Number of text inputs on this block.\n   * @type {number}\n   */\n  itemCount_: 0,\n\n  /**\n   * Creates XML to represent number of inputs.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    const container = Blockly.utils.xml.createElement('mutation');\n    container.setAttribute('items', this.itemCount_);\n    return container;\n  },\n\n  /**\n   * Parses XML to restore the inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    const targetCount = parseInt(xmlElement.getAttribute('items'), 10);\n    this.updateShape_(targetCount);\n  },\n\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   * @return {{itemCount: number}} The state of this block, ie the item count.\n   */\n  saveExtraState: function() {\n    return {\n      'itemCount': this.itemCount_,\n    };\n  },\n\n  /**\n   * Applies the given state to this block.\n   * @param {*} state The state to apply to this block, ie the item count.\n   */\n  loadExtraState: function(state) {\n    this.updateShape_(state['itemCount']);\n  },\n\n  /**\n   * Adds inputs to the block until the block reaches the target input count.\n   * @param {number} targetCount The number of inputs the block should have.\n   * @this {Blockly.Block}\n   * @private\n   */\n  updateShape_: function(targetCount) {\n    while (this.itemCount_ < targetCount) {\n      this.addPart_();\n    }\n    while (this.itemCount_ > targetCount) {\n      this.removePart_();\n    }\n    this.updateMinus_();\n  },\n\n  /**\n   * Callback for the plus image. Adds an input to the block and updates the\n   * state of the minus.\n   * @this {Blockly.Block}\n   */\n  plus: function() {\n    this.addPart_();\n    this.updateMinus_();\n  },\n\n  /**\n   * Callback for the minus image. Removes the input at the end of the block and\n   * updates the state of the minus.\n   * @this {Blockly.Block}\n   */\n  minus: function() {\n    if (this.itemCount_ == 0) {\n      return;\n    }\n    this.removePart_();\n    this.updateMinus_();\n  },\n\n  /**\n   * Adds an input to the end of the block. If the block currently has no\n   * inputs it updates the top 'EMPTY' input to receive a block.\n   * @this {Blockly.Block}\n   * @private\n   */\n  addPart_: function() {\n    if (this.itemCount_ == 0) {\n      if (this.getInput('EMPTY')) {\n        this.removeInput('EMPTY');\n      }\n      this.topInput_ = this.appendValueInput('ADD' + this.itemCount_)\n          .appendField(createPlusField(), 'PLUS')\n          .appendField('Make lookup');\n    } else {\n      this.appendValueInput('ADD' + this.itemCount_);\n    }\n    // Because item inputs are 0-index we decrement first, increment last.\n    this.itemCount_++;\n  },\n\n  /**\n   * Removes an input from the end of the block. If we are removing the last\n   * input this updates the block to have an 'EMPTY' top input.\n   * @this {Blockly.Block}\n   * @private\n   */\n  removePart_: function() {\n    this.itemCount_--;\n    this.removeInput('ADD' + this.itemCount_);\n    if (this.itemCount_ == 0) {\n      this.topInput_ = this.appendDummyInput('EMPTY')\n          .appendField(createPlusField(), 'PLUS')\n          .appendField(this.newQuote_(true))\n          .appendField(this.newQuote_(false));\n    }\n  },\n\n  /**\n   * Makes it so the minus is visible iff there is an input available to remove.\n   * @private\n   */\n  updateMinus_: function() {\n    const minusField = this.getField('MINUS');\n    if (!minusField && this.itemCount_ > 0) {\n      this.topInput_.insertFieldAt(1, createMinusField(), 'MINUS');\n    } else if (minusField && this.itemCount_ < 1) {\n      this.topInput_.removeField('MINUS');\n    }\n  },\n};\n\n/**\n * Adds the quotes mixin to the block. Also updates the shape so that if no\n * mutator is provided the block has two inputs.\n * @this {Blockly.Block}\n */\nconst textJoinHelper = function() {\n  Blockly.Extensions.apply('text_quotes', this, false);\n  this.updateShape_(2);\n};\n\nif (Blockly.Extensions.isRegistered('text_join_mutator')) {\n  Blockly.Extensions.unregister('text_join_mutator');\n}\nBlockly.Extensions.registerMutator('text_join_mutator',\n    textJoinMutator, textJoinHelper);\n"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE__573__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","getExtraBlockState","block","saveExtraState","state","JSON","stringify","mutationToDom","Blockly","createPlusField","args","plus","plusImage","onClick_","args_","plusField","getSourceBlock","isInFlyout","oldExtraState","newExtraState","minusField","minus","minusImage","textJoinMutator","itemCount_","container","setAttribute","domToMutation","xmlElement","targetCount","parseInt","getAttribute","updateShape_","loadExtraState","addPart_","removePart_","updateMinus_","getInput","removeInput","topInput_","appendValueInput","appendField","appendDummyInput","newQuote_","getField","insertFieldAt","createMinusField","removeField"],"sourceRoot":""}